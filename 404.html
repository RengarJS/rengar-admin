<!--  此文件用于解决部署github pages刷新404问题，实际开发中可直接删除 -->
<!doctype html>
<html lang="">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>%VITE_APP_TITLE%</title>

    <script>
      const segment = 2 // 如果部署在子路径（如 /repo/），此处填 2
      const path = location.pathname.split('/').filter(Boolean)
      const redirect = path
        .slice(0, segment)
        .concat(path.slice(segment + 1))
        .join('/')
      location.replace(
        location.origin + (segment > 1 ? '/' + path.slice(0, segment).join('/') : '') + '/?p=/' + redirect,
      )
    </script>
  </head>
  <body>
    <div id="app-loading"></div>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
